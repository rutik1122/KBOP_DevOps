@model iBAS.Models.PasswordModel

@{
    Layout = null;
}

<html data-bs-theme="light" lang="en-US" dir="ltr">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <script src="~/Scripts/jquery-3.6.0.min.js"></script>
    <script src="~/Scripts/aes.js"></script>

    <!-- ===============================================-->
    <!--    Document Title-->
    <!-- ===============================================-->
    <title>K-BOP | Kores Branch Operation Platform</title>


    <!-- ===============================================-->
    <!--    Favicons-->
    <!-- ===============================================-->
    @*<link rel="apple-touch-icon" sizes="180x180" href="~/vendors/assets/img/favicons/apple-touch-icon.png">
        <link rel="icon" type="image/png" sizes="32x32" href="~/vendors/assets/img/favicons/favicon-32x32.png">
        <link rel="icon" type="image/png" sizes="16x16" href="~/vendors/assets/img/favicons/favicon-16x16.png">
        <link rel="shortcut icon" type="image/x-icon" href="~/vendors/assets/img/favicons/favicon.ico">*@
    <link rel="apple-touch-icon" sizes="180x180" href="~/vendors/assets/img/favicons/KoresLogo.png">
    <link rel="icon" type="image/png" sizes="32x32" href="~/vendors/assets/img/favicons/KoresLogo.png">
    <link rel="icon" type="image/png" sizes="16x16" href="~/vendors/assets/img/favicons/KoresLogo.png">
    <link rel="shortcut icon" type="image/x-icon" href="~/vendors/assets/img/favicons/KoresLogo.ico">
    <link rel="manifest" href="~/vendors/assets/img/favicons/manifest.json">
    <meta name="msapplication-TileImage" content="~/vendors/assets/img/favicons/mstile-150x150.png">
    <meta name="theme-color" content="#ffffff">
    <script src="~/vendors/assets/js/config.js"></script>
    <script src="~/vendors/simplebar/simplebar.min.js"></script>


    <!-- ===============================================-->
    <!--    Stylesheets-->
    <!-- ===============================================-->
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,400,500,600,700%7cPoppins:300,400,500,600,700,800,900&amp;display=swap"
          rel="stylesheet">
    <link href="~/vendors/simplebar/simplebar.min.css" rel="stylesheet">
    <link href="~/vendors/assets/css/theme-rtl.min.css" rel="stylesheet" id="style-rtl">
    <link href="~/vendors/assets/css/theme.min.css" rel="stylesheet" id="style-default">
    <link href="~/vendors/assets/css/user-rtl.min.css" rel="stylesheet" id="user-style-rtl">
    <link href="~/vendors/assets/css/user.min.css" rel="stylesheet" id="user-style-default">
</head>
<input id="pass" name="pass" value="@Session["user_currentPassword"]" hidden />
<input id="msg" name="msg" value="@ViewBag.alertmsg" hidden />
<body>

    <input id="errormsg" value="" hidden />

    <!-- ===============================================-->
    <!--    Main Content-->
    <!-- ===============================================-->
    <main class="main" id="top">
        <div class="container-fluid">
            <div class="row min-vh-100 flex-center g-0">
                <div class="col-lg-5 col-xxl-5 py-3 position-relative">
                    <div class="card overflow-hidden z-1">
                        <div class="card-body p-0">
                            <div class="row g-0 h-100">
                                <!--<div class="col-md-5 text-center bg-card-gradient">
                                    <div class="position-relative p-4 pt-md-5 pb-md-7" data-bs-theme="light">
                                        <div class="bg-holder bg-auth-card-shape"
                                             style="background-image:url(~/vendors/assets/img/icons/spot-illustrations/half-circle.png);">
                                        </div>-->
                                        <!--/.bg-holder-->

                                        <!--<div class="z-1 position-relative">
                                            <a class="link-light mb-5 font-sans-serif fs-4 d-inline-block fw-bolder" href="~/index.html">
                                                <img src="~/vendors/assets/img/kores_logo-bg_white.png" alt="" width="180" height="auto">
                                            </a>
                                            <p class="opacity-75 text-white">
                                                Kores is a brand of school stationery and office products best
                                                known for solid glue sticks, dry correction tapes and Kolores coloured pencils. Kores was
                                                founded in 1887 by Wilhelm Koreska, the great-grandfather of Clemens Koreska, the current
                                                president of Kores Group.
                                            </p>
                                        </div>
                                    </div>
                                </div>-->
                                <div class="col-md-7 d-flex flex-center">
                                    <div class="p-4 p-md-5 flex-grow-1">
                                        <div class="z-1 position-relative">
                                            <a class="link-light mb-5 font-sans-serif fs-4 d-inline-block fw-bolder" href="~/index.html">
                                                <img src="~/vendors/assets/img/kores_logo-bg_white.png" alt="" width="180" height="auto">
                                            </a>
                                        </div>
                                        <div class="row flex-between-center">
                                            <div class="col-auto">
                                                <h3 class="text-primary">Reset Password</h3>
                                            </div>
                                        </div>
                                        @using (Html.BeginForm("ResetPassword", "Home", FormMethod.Post))
                                        {
                                            @*<input name="sess" id="sess" value="@Session["sessionVal"].ToString()" hidden />
            <input name="yes1" id="yes1" value="" hidden />
            <input name="yes2" id="yes2" value="" hidden />*@

                                            <form>
                                                <div class="mb-3">
                                                    <div class="d-flex justify-content-between">
                                                        <label class="form-label" for="card-password">Old Password</label>
                                                    </div>
                                                    @*<input class="form-control" id="card-email" type="email" />*@
                                                    @Html.PasswordFor(m => m.OldPassword, new { placeholder = "Old Password", @class = "form-control" })
                                                </div>
                                                <div class="mb-3">
                                                    <div class="d-flex justify-content-between">
                                                        <label class="form-label" for="card-password">New Password</label>
                                                    </div>
                                                    @*<input class="form-control" id="card-password" type="password" />*@
                                                    @Html.PasswordFor(m => m.NewPassword1, new { placeholder = "New Password", @class = "form-control" })
                                                </div>
                                                <div class="mb-3">
                                                    <div class="d-flex justify-content-between">
                                                        <label class="form-label" for="card-password">Re-Enter New Password</label>
                                                    </div>
                                                    @*<input class="form-control" id="card-password" type="password" />*@
                                                    @Html.PasswordFor(m => m.NewPassword2, new { placeholder = "Re-Enter New Password", @class = "form-control" })
                                                </div>
                                                <div class="mb-3">
                                                    <button class="btn btn-primary d-block w-100 mt-3" type="submit" name="submit" onclick="return (ResetPassword())">Reset</button>
                                                </div>
                                                <div id="div_error_msg" class="my-3">
                                                    <label id="lbl_error_msg" class="form-label bg-danger text-white text-center p-2 d-block w-100 ">

                                                    </label>
                                                </div>

                                            </form>
                                        }
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <!-- ===============================================-->
    <!--    End of Main Content-->
    <!-- ===============================================-->
    <!-- ===============================================-->
    <!--    JavaScripts-->
    <!-- ===============================================-->
    <script src="~/vendors/popper/popper.min.js"></script>
    <script src="~/vendors/bootstrap/bootstrap.min.js"></script>
    <script src="~/vendors/anchorjs/anchor.min.js"></script>
    <script src="~/vendors/is/is.min.js"></script>
    <script src="~/vendors/fontawesome/all.min.js"></script>
    <script src="~/vendors/lodash/lodash.min.js"></script>
    <script src="https://polyfill.io/v3/polyfill.min.js?features=window.scroll"></script>
    <script src="~/vendors/list.js/list.min.js"></script>
    <script src="~/vendors/assets/js/theme.js"></script>

    <script type="text/javascript">

        $(document).ready(function () {

            $("#div_error_msg").hide();

        });

        function ResetPassword() {

            debugger;
            $("#div_error_msg").hide();

            var oldPwd = document.getElementById("pass").value;

            var formOldPwd = document.getElementById("OldPassword").value;
            var formNewPwd1 = document.getElementById("NewPassword1").value;
            var formNewPwd2 = document.getElementById("NewPassword2").value;

            if (formOldPwd == null || formOldPwd == "") {
                $("#div_error_msg").show();
                document.getElementById("lbl_error_msg").innerHTML = "Please enter old password!";
                document.getElementById("OldPassword").focus();
                return false;
            }
            if (formOldPwd != oldPwd) {
                $("#div_error_msg").show();
                document.getElementById("lbl_error_msg").innerHTML = "Old password is incorrect!";
                document.getElementById("OldPassword").focus();
                return false;
            }
            if (formNewPwd1 == null || formNewPwd1 == "") {
                $("#div_error_msg").show();
                document.getElementById("lbl_error_msg").innerHTML = "Please enter new password!";
                document.getElementById("NewPassword1").focus();
                return false;
            }

            if (formNewPwd1 == formOldPwd) {
                $("#div_error_msg").show();
                document.getElementById("lbl_error_msg").innerHTML = "New password is matching with the old password!";
                document.getElementById("NewPassword1").value = "";
                document.getElementById("NewPassword1").focus();
                return false;
            }

            if (formNewPwd2 == null || formNewPwd2 == "") {
                $("#div_error_msg").show();
                document.getElementById("lbl_error_msg").innerHTML = "Please enter the re-enter password";
                document.getElementById("NewPassword2").focus();
                return false;
            }

            if (formNewPwd1 != formNewPwd2) {
                $("#div_error_msg").show();
                document.getElementById("lbl_error_msg").innerHTML = " Re-entered password is not matching the new password!";
                document.getElementById("NewPassword2").value = "";
                document.getElementById("NewPassword2").focus();
                return false;
            }
            return true;

        }
    </script>

</body>

</html>

